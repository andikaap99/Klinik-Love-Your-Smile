<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Resepsionis - Klinik Gigi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="navbar">Resepsionis</div>

  <div style="display: flex; height: 100vh;">
    <div class="sidebar">
      <h3>Klinik Gigi<br><small>Love Your Smile</small></h3>
      <div class="avatar">X</div>
      <button class='active'>Daftar Pasien</button>
      <button onclick="window.location.href='perawatan.html'">Perawatan</button>
      <button onclick="window.location.href='pembayaran.html'">Pembayaran</button>
    </div>

    <div class="main" style="flex:1; padding:40px 32px; display:flex; flex-direction:column; align-items:center; justify-content:flex-start;">
      <h2>Daftar Pasien</h2>
      <table style="width:100%; border-collapse:collapse; margin-bottom:25px;">
          <thead>
            <tr>
              <th>No</th>
              <th>Nama</th>
              <th>No. Telp</th>
              <th>Alamat</th>
            </tr>
          </thead>
          <tbody id="pasienTableBody">
          </tbody>
        </table>
        <button class="add-btn" style="margin-top:16px;">Tambah Pasien</button>
      </div>
    </div>
  </div>

<div class="navbar">
  Resepsionis
  <button onclick="logout()" style="float:right; margin-right:24px; background:#d32f2f; color:#fff; border:none; border-radius:5px; padding:8px 18px; cursor:pointer;">Logout</button>
</div>

<script>
// Load data pasien dengan XMLHttpRequest (AJAX Native)
function loadPasien() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'get_pasien.php', true);
    xhr.onload = function() {
        if (this.status === 200) {
            var data = JSON.parse(this.responseText);
            var tbody = document.getElementById('pasienTableBody');
            tbody.innerHTML = ""; // Kosongkan isi tbody dulu

            data.forEach(function(pasien, index) {
                var row = document.createElement('tr');

                // Kolom No (index + 1)
                var tdNo = document.createElement('td');
                tdNo.textContent = index + 1;
                row.appendChild(tdNo);

                // Kolom Nama
                var tdNama = document.createElement('td');
                tdNama.textContent = pasien.nama;
                row.appendChild(tdNama);

                // Kolom No. Telp
                var tdTelp = document.createElement('td');
                tdTelp.textContent = pasien.no_telp;
                row.appendChild(tdTelp);

                // Kolom Alamat
                var tdAlamat = document.createElement('td');
                tdAlamat.textContent = pasien.alamat;
                row.appendChild(tdAlamat);

                // Tambahkan row ke tbody
                tbody.appendChild(row);
            });
        } else {
            console.error('Gagal memuat data pasien.');
        }
    };
    xhr.send();
}

// Load data saat halaman selesai dimuat
window.onload = loadPasien;
</script>

</body>
</html>
